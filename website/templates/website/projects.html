{% extends 'website/base.html' %}

{% block pagetitle %}Project Gallery{% endblock %}

{% load staticfiles %}
{% load cropping %}
{% load thumbnail %}

{% block stylesheets %}
    <!-- TODO: go through every css file and make sure it's necessary to include -->
    <link rel="stylesheet" href="{% static 'website/css/projects.css'  %}">
    <link rel="stylesheet" href="{% static 'website/css/fixed_side_bar.css' %}">
    <link rel="stylesheet" href="{% static 'website/css/jquery-ui.min.css' %}">
    <link rel="stylesheet" href="{% static 'website/css/jquery-ui.theme.min.css' %}">
    <link rel="stylesheet" href="{% static 'website/css/bootstrap-modifications.css' %}">
{% endblock %}

{% block external_scripts %}
    <script src="{% static 'website/js/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'website/js/fixedSideBar.js' %}"></script>
    <script src="{% static 'website/js/isotope/isotope-filterBar.js' %}?version=30"></script>
    <script src="{% static 'website/js/jquery-ui.min.js' %}?version=30"></script>
    <script src="{% static 'website/js/jquery-ui.min.js' %}?version=30"></script>
    <script src="{% static 'website/js/isotope/isotope-init.js' %}?version=30"></script>
    <script src="{% static 'website/js/isotope/isotope-filtering.js' %}?version=30"></script>

{% endblock %}



{% block maincarousel %}
<div id="mainCarousel" class="carousel slide carousel-fade shortCarousel" data-ride="carousel" data-interval="10000" data-pause="false">    
    <div class="page-title shadow-left">
        <div class="container carousel-container">
            <div class="overlay-title">Projects</div>
        </div>
    </div>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
        {% for banner in banners %}
        <div class="item {% if forloop.first %}active{% endif %}">
	    {% if banner.link %}
	    <a href="{{banner.link}}">
		{% else %}
		{% if banner.project %}
		<a href="{% url 'website:project' banner.project.short_name %}">
		    {% endif %}
		    {% endif %}
		    <div class="fill" style="background-image:url({% cropped_thumbnail banner "cropping" scale=1.0 %})" aria-label="{{ banner.alt_text }}" title="{{ banner.alt_text }}"></div>
		    {% if banner.link %}</a>{% endif %}
		{% if banner.project %}
	    </a>
	    {% endif %}
        </div>
        {% endfor %}
    </div>
    <ol class="carousel-indicators"  {% if banners|length < 2 %} style="display: none" {% endif %}>
        {% for banner in banners %}
        <li data-target="#mainCarousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></li>
        {% endfor %}
    </ol>
</div>
{% endblock %}

{% block content %}
     <div id="content" class="container">

        <!-- TODO: add in support for mobile filtering & sorting -->
        <div class="visible-xs">
            <br/>
            <input class="shortTextbox" id="filter-textbox-backup" placeholder="FILTER" type="text" value="">
        </div>
        <div id ="isotope_data_container" style="display:none">
            sortFilterContainer(.sortingAndFiltering,str)
            gridName(.grid,str)
            filteringKeywordContainer(#keywords,str)
            sideBarContainer(#fixed-side-bar,str)
            scrollTop(175,int)
        </div>
        <div id="fixed-side-bar" class="hidden-xs">
            <div id="keywords">
                <h1>Filter By</h1>
                <h2>AREA</h2>
                <ul class="filter-list">
                    <li><a>Accessibility</a></li>
                    <li><a>Education</a></li>
                    <li><a>Fabrication</a></li>
                    <li><a>Health/Wellness</a></li>
                    <li><a>Smart Cities</a></li>
                    <li><a>Sustainability</a></li>
                </ul>

                <h2>TECH</h2>
                <ul class="filter-list">
                    <li><a>Augmented Reality</a></li>
                    <li><a>Computer Vision</a></li>
                    <li><a>Custom Hardware</a></li>
                    <li><a>E-Textiles</a></li>
                    <li><a>Machine Learning</a></li>
                    <li><a>Wearables</a></li>
                </ul>
                <li class="filter-list"><a>None</a></li>
            </div>
        </div>



        <div id="main-content" class="project-list">
            <div class="grid">
                {% for project in projects %}
                        <div class="item" name="project" style="width:30%; margin:1.5%; background:white">
                            <a href="{% url 'website:project' project.short_name %}" style="color:black;">
                                <img src="{% thumbnail project.gallery_image 300x180 box=project.cropping crop detail %}" class="img-responsive">
                                <p class="artifact-title">{{ project.name }}</p>
                            </a>
                            <div style="min-height:15px"></div>
                            <div class="sortingAndFiltering" style="display:none">{{ project.get_keywords_as_string }}</div>
                            <div class="Date" style="display:none">{{project.start_date.year}}{{project.start_date.month}}{{project.start_date.day}}</div>
                        </div>
                {% endfor %}
            </div>
        </div>
    </div>

{# This is the old project gallery #}
{#<div id="content" class="container content-container" data-spy="scroll">#}
{#    <div class="row header">#}
{#    </div>#}
{#    <div class="row">#}
{#	<div class="col-md-2 hidden-xs hidden-sm sidebar">#}
{#	    <div class="sidebar-container row">#}
{#		<h4 class="header-label">Project Umbrellas</h4>#}
{#		<span class="project-umbrella-link"><a href="{% url 'website:projects' %}">All ({{all_proj_len}})</a></span><br/>#}
{#		{% for umbrella in umbrellas %}#}
{#		<span class="project-umbrella-link"><a href="{% url 'website:projects'%}?filter={{umbrella.short_name}}">{{umbrella.name}} ({{umbrella.project_set.all|length}})</a></span><br/>#}
{#		{% endfor %}#}
{#	    </div>#}
{#	    <div class="sidebar-container row">#}
{#		<h4 class="header-label">Recent Projects</h4>#}
{#		{% for project in recent %}#}
{#		<div class="sidebar-container row">#}
{#		    <a href="{% url 'website:project' project.short_name %}">#}
{#			<img src="{% thumbnail project.gallery_image 250x200 box=project.cropping crop detail %}" class="img-responsive recent-image"/>#}
{#		    </a>#}
{#		    <a href="{% url 'website:project' project.short_name %}">#}
{#			<span class="recent-project-name">{{project.name}}</span>#}
{#		    </a>#}
{#		</div>#}
{#		{% endfor %}#}
{#	    </div>#}
{#	    <div class="sidebar-container row">#}
{#		<h4 class="header-label">Popular Projects</h4>#}
{#		{% for project in popular %}#}
{#		<div class="col-xs-6 popular-project">#}
{#		    <a href="{% url 'website:project' project.short_name %}">#}
{#			<img src="{% thumbnail project.gallery_image 250x200 box=project.cropping crop detail %}" class="img-responsive"/>#}
{#		    </a>#}
{#		</div>#}
{#		{% endfor %}#}
{#	    </div>#}
{#	</div>#}
{#	<div class="col-md-10 col-xs-12 project-block">#}
{#	    <div class="row">#}
{#		{% for project in projects %}#}
{#		<div class="col-xs-12 col-sm-6 col-md-4 project-display">#}
{#		    <a href="{% url 'website:project' project.short_name %}">#}
{#			<img src="{% thumbnail project.gallery_image 500x400 box=project.cropping crop detail %}" class="img-responsive"/>#}
{#		    </a>#}
{#		    <a href="{% url 'website:project' project.short_name %}">#}
{#			<span class="project-name">{{project.name}}</span>#}
{#		    </a>#}
{#		</div>#}
{#		{% endfor %}#}
{#	    </div>#}
{#	</div>#}
{#    </div>#}
{#</div>#}
{% endblock %}



